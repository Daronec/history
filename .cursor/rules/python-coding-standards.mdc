---
globs: *.py
description: Стандарты кодирования Python для проекта ИИ-История
---

# Стандарты кодирования Python

## Общие принципы

- **Кодировка**: Всегда используйте UTF-8
- **Отступы**: 4 пробела (не табы)
- **Длина строки**: Максимум 120 символов
- **Комментарии**: На русском языке для пользовательских сообщений

## Импорты

```python
# Стандартная библиотека
import os
import sys
import json
from pathlib import Path

# Сторонние библиотеки
import torch
import transformers
from tkinter import ttk

# Локальные модули
from src.data_processing import process_data
```

## Обработка ошибок

```python
try:
    # Код с возможной ошибкой
    result = risky_operation()
except SpecificException as e:
    logger.error(f"Ошибка в операции: {e}")
    messagebox.showerror("Ошибка", f"Не удалось выполнить операцию: {e}")
except Exception as e:
    logger.error(f"Неожиданная ошибка: {e}")
    messagebox.showerror("Ошибка", f"Произошла неожиданная ошибка: {e}")
```

## Работа с путями

```python
# Используйте pathlib для кроссплатформенности
from pathlib import Path

# Правильно
data_dir = Path("data/raw")
model_path = data_dir / "model.bin"

# Для exe файлов
if getattr(sys, 'frozen', False):
    BASE_DIR = Path(sys.executable).parent
else:
    BASE_DIR = Path(__file__).parent
```

## Логирование

```python
import logging

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('logs/app.log', encoding='utf-8'),
        logging.StreamHandler()
    ]
)
logger = logging.getLogger(__name__)
```